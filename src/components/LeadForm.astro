---
import { getLangFromUrl, useTranslations } from '../utils/i18n';

interface Props {
  type: 'employers' | 'jobSeekers';
}

const { type } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const isEmployer = type === 'employers';
const formTitle = isEmployer ? t('forms.employers.title') : t('forms.jobSeekers.title');
---

<div class="bg-white p-6 md:p-8 rounded-lg shadow-lg border border-gray-100 w-full">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">{formTitle}</h2>
  
  <!-- 
    Integration Note: 
    To connect with Netlify Forms, add 'netlify' attribute to the form tag.
    To connect with Formspree, set action="https://formspree.io/f/YOUR_FORM_ID"
    For this demo, we use a standard post method.
  -->
  <form class="space-y-4" method="POST">
    {isEmployer ? (
      <div>
        <label for="company" class="block text-sm font-medium text-gray-700 mb-1">{t('forms.employers.company')}</label>
        <input type="text" id="company" name="company" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
      </div>
    ) : null}

    <div>
      <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
        {isEmployer ? t('forms.employers.name') : t('forms.jobSeekers.name')}
      </label>
      <input type="text" id="name" name="name" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
    </div>

    <div>
      <label for="email" class="block text-sm font-medium text-gray-700 mb-1">
        {isEmployer ? t('forms.employers.email') : t('forms.jobSeekers.email')}
      </label>
      <input type="email" id="email" name="email" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
    </div>

    <div>
      <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">
        {isEmployer ? t('forms.employers.phone') : t('forms.jobSeekers.phone')}
      </label>
      <input type="tel" id="phone" name="phone" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
    </div>

    {isEmployer ? (
      <>
        <div>
          <label for="industry" class="block text-sm font-medium text-gray-700 mb-1">{t('forms.employers.industry')}</label>
          <select id="industry" name="industry" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
             <option value="construction">{t('industries.construction')}</option>
             <option value="healthcare">{t('industries.healthcare')}</option>
             <option value="technology">{t('industries.technology')}</option>
             <option value="general">{t('industries.generalLabor')}</option>
          </select>
        </div>
        <div>
          <label for="roles" class="block text-sm font-medium text-gray-700 mb-1">{t('forms.employers.roles')}</label>
          <textarea id="roles" name="roles" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>
        <div>
          <label for="urgency" class="block text-sm font-medium text-gray-700 mb-1">{t('forms.employers.urgency')}</label>
          <select id="urgency" name="urgency" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
            <option value="immediate">{t('forms.employers.urgencyOptions.immediate')}</option>
            <option value="soon">{t('forms.employers.urgencyOptions.soon')}</option>
            <option value="planning">{t('forms.employers.urgencyOptions.planning')}</option>
          </select>
        </div>
      </>
    ) : (
      <>
        <div>
          <label for="preferredIndustry" class="block text-sm font-medium text-gray-700 mb-1">{t('forms.jobSeekers.preferredIndustry')}</label>
           <select id="preferredIndustry" name="preferredIndustry" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
             <option value="construction">{t('industries.construction')}</option>
             <option value="healthcare">{t('industries.healthcare')}</option>
             <option value="technology">{t('industries.technology')}</option>
             <option value="general">{t('industries.generalLabor')}</option>
          </select>
        </div>
        <div>
          <label for="role" class="block text-sm font-medium text-gray-700 mb-1">{t('forms.jobSeekers.role')}</label>
          <input type="text" id="role" name="role" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
        </div>
        <div>
          <label for="experience" class="block text-sm font-medium text-gray-700 mb-1">{t('forms.jobSeekers.experience')}</label>
          <select id="experience" name="experience" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
            <option value="entry">{t('forms.jobSeekers.experienceOptions.entry')}</option>
            <option value="mid">{t('forms.jobSeekers.experienceOptions.mid')}</option>
            <option value="senior">{t('forms.jobSeekers.experienceOptions.senior')}</option>
          </select>
        </div>
        <div>
          <label for="resume" class="block text-sm font-medium text-gray-700 mb-1">{t('forms.jobSeekers.resume')}</label>
          <input type="url" id="resume" name="resume" placeholder="https://linkedin.com/in/..." class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" />
        </div>
      </>
    )}

    <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-md hover:bg-blue-700 transition-colors mt-6">
      {t('buttons.submit')}
    </button>
  </form>
</div>
